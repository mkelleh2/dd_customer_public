{
    "title": "Implementation Services -  Tagging Review v2",
    "description": "[[suggested_dashboards]]",
    "widgets": [
        {
            "id": 3373263645551333,
            "definition": {
                "title": "env tags",
                "show_title": true,
                "type": "group",
                "layout_type": "ordered",
                "widgets": [
                    {
                        "id": 2357663073437782,
                        "definition": {
                            "title": "Agents with an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:datadog.agent.running{env:*,$service}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:datadog.agent.running{$service}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 8702640927998321,
                        "definition": {
                            "title": "Containers with an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:container.cpu.system{env:*,$service}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:container.cpu.system{$service}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 8573065033625077,
                        "definition": {
                            "title": "Spans with an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "env:* $service"
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [],
                                            "name": "query2"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 2398318718323078,
                        "definition": {
                            "title": "EC2 instances with an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.ec2.cpuutilization{env:*,$service}"
                                        },
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:aws.ec2.cpuutilization{$service}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 50637848079372,
                        "definition": {
                            "title": "Pods with an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:kubernetes.pods.running{env:*,$service}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:kubernetes.pods.running{$service}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "custom_links": [
                                {
                                    "label": "pods without env tag",
                                    "link": "https://app.datadoghq.com/orchestration/explorer/pod?query=-env%3A%2A%20&"
                                }
                            ],
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 1035945022321044,
                        "definition": {
                            "title": "Traces with an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "cardinality",
                                                "metric": "complete_trace"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "env:* $service"
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "cardinality",
                                                "metric": "complete_trace"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query2",
                                            "search": {
                                                "query": "$service"
                                            },
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 8357115291671122,
                        "definition": {
                            "title": "Agents Missing an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:datadog.agent.running{!env:*,$service} by {host,name,env,environment,service}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing env tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 4,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 5070963714284223,
                        "definition": {
                            "title": "Containers Missing an env Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:container.cpu.system{!env:*,$service} by {name,container_name,env,environment,cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing env tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 8,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 6788908675625325,
                        "definition": {
                            "title": "Spans Missing an env Tag by Service",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "group_by": [
                                                {
                                                    "facet": "service",
                                                    "limit": 10,
                                                    "sort": {
                                                        "aggregation": "count",
                                                        "metric": "count",
                                                        "order": "desc"
                                                    }
                                                }
                                            ],
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "-env:* $service"
                                            },
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing env tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 12,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 8079017159899160,
                        "definition": {
                            "type": "note",
                            "content": "[metrics without an env tag](https://app.datadoghq.com/metric/summary?tags=%21env%3A%2A)  | [logs without an env tag](https://app.datadoghq.com/logs?query=-env%3A%2A%20&agg_m=count&agg_m_source=base&agg_q=source&agg_q_source=base&agg_t=count&cols=host%2Cservice&fromUser=true&messageDisplay=inline&refresh_mode=sliding&storage=hot&stream_sort=desc&top_n=10&top_o=top&viz=timeseries&x_missing=true&live=true) | [spans without an env tag](https://app.datadoghq.com/apm/traces?query=-env%3A%2A%20&agg_m=count&agg_m_source=base&agg_t=count&cols=core_service%2Ccore_resource_name%2Clog_duration%2Clog_http.method%2Clog_http.status_code&fromUser=false&historicalData=false&messageDisplay=inline&query_translation_version=v0&sort=desc&spanType=all&view=spans&paused=false)",
                            "background_color": "white",
                            "font_size": "14",
                            "text_align": "center",
                            "vertical_align": "top",
                            "show_tick": false,
                            "tick_pos": "50%",
                            "tick_edge": "left",
                            "has_padding": true
                        },
                        "layout": {
                            "x": 0,
                            "y": 16,
                            "width": 12,
                            "height": 1
                        }
                    }
                ]
            },
            "layout": {
                "x": 0,
                "y": 0,
                "width": 12,
                "height": 18
            }
        },
        {
            "id": 5214627339339812,
            "definition": {
                "title": "service tags",
                "show_title": true,
                "type": "group",
                "layout_type": "ordered",
                "widgets": [
                    {
                        "id": 8087904489093838,
                        "definition": {
                            "title": "Agents with a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:datadog.agent.running{service:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:datadog.agent.running{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 6355131335500414,
                        "definition": {
                            "title": "Containers with a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:container.cpu.system{service:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:container.cpu.system{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 5323767114270110,
                        "definition": {
                            "title": "Traces with a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "service:* "
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [],
                                            "name": "query2"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 7930709857346027,
                        "definition": {
                            "title": "EC2 instances with a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.ec2.cpuutilization{service:*}"
                                        },
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:aws.ec2.cpuutilization{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 2412033980758507,
                        "definition": {
                            "title": "Pods with a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:kubernetes.pods.running{service:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:kubernetes.pods.running{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "custom_links": [
                                {
                                    "label": "pods without env tag",
                                    "link": "https://app.datadoghq.com/orchestration/explorer/pod?query=-env%3A%2A%20&"
                                }
                            ],
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 6969237158733477,
                        "definition": {
                            "title": "Traces with a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "cardinality",
                                                "metric": "complete_trace"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "service:* "
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "cardinality",
                                                "metric": "complete_trace"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query2",
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 6818682305172528,
                        "definition": {
                            "title": "Agents Missing a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:datadog.agent.running{!service:*} by {host,name,team}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing env tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 4,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 5402589756254802,
                        "definition": {
                            "title": "Containers Missing a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:container.cpu.system{!service:*} by {name,container_name,cluster_name,kube_service}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing env tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 8,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 429627429408764,
                        "definition": {
                            "title": "Spans Missing a service Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "-service:* "
                                            },
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing env tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 12,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 4290152926278012,
                        "definition": {
                            "type": "note",
                            "content": "[metrics without a service tag](https://app.datadoghq.com/metric/summary?tags=%21service%3A%2A)  | [logs without a service tag](https://app.datadoghq.com/logs?query=-service%3A%2A%20&agg_m=count&agg_m_source=base&agg_q=source&agg_q_source=base&agg_t=count&cols=host%2Cservice&fromUser=true&messageDisplay=inline&refresh_mode=sliding&storage=hot&stream_sort=desc&top_n=10&top_o=top&viz=timeseries&x_missing=true&live=true) | [spans without a service tag](https://app.datadoghq.com/apm/traces?query=-service%3A%2A%20&agg_m=count&agg_m_source=base&agg_t=count&cols=core_service%2Ccore_resource_name%2Clog_duration%2Clog_http.method%2Clog_http.status_code&fromUser=false&historicalData=false&messageDisplay=inline&query_translation_version=v0&sort=desc&spanType=all&view=spans&paused=false)",
                            "background_color": "white",
                            "font_size": "14",
                            "text_align": "center",
                            "vertical_align": "top",
                            "show_tick": false,
                            "tick_pos": "50%",
                            "tick_edge": "left",
                            "has_padding": true
                        },
                        "layout": {
                            "x": 0,
                            "y": 16,
                            "width": 12,
                            "height": 1
                        }
                    }
                ]
            },
            "layout": {
                "x": 0,
                "y": 18,
                "width": 12,
                "height": 18
            }
        },
        {
            "id": 1236252658206649,
            "definition": {
                "title": "version tags",
                "show_title": true,
                "type": "group",
                "layout_type": "ordered",
                "widgets": [
                    {
                        "id": 8351307288714846,
                        "definition": {
                            "title": "Agents with a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:datadog.agent.running{version:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:datadog.agent.running{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 4819468919383844,
                        "definition": {
                            "title": "Containers with a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:container.cpu.system{version:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:container.cpu.system{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 3256819206877490,
                        "definition": {
                            "title": "Traces with a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "version:* "
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [],
                                            "name": "query2"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 0,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 4308654971391937,
                        "definition": {
                            "title": "EC2 instances with a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.ec2.cpuutilization{version:*}"
                                        },
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:aws.ec2.cpuutilization{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 6832065897209480,
                        "definition": {
                            "title": "Pods with a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 80
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_yellow",
                                            "value": 80
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:kubernetes.pods.running{version:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:kubernetes.pods.running{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "custom_links": [
                                {
                                    "label": "pods without env tag",
                                    "link": "https://app.datadoghq.com/orchestration/explorer/pod?query=-env%3A%2A%20&"
                                }
                            ],
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 371227123588299,
                        "definition": {
                            "title": "Traces with a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "cardinality",
                                                "metric": "complete_trace"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "version:* "
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "cardinality",
                                                "metric": "complete_trace"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query2",
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 2,
                            "width": 4,
                            "height": 2
                        }
                    },
                    {
                        "id": 7286941054981451,
                        "definition": {
                            "title": "Agents Missing a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:datadog.agent.running{!version:*} by {host,name,version,datadog.version}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing vesion tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 4,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 3388919510138490,
                        "definition": {
                            "title": "Containers Missing a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:container.cpu.system{!version:*} by {container_name,cluster_name,version,image_tag,short_image}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing version tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 8,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 3746800594344488,
                        "definition": {
                            "title": "Spans Missing a version Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "-service:* "
                                            },
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing env tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 12,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 7564041824702483,
                        "definition": {
                            "type": "note",
                            "content": "[metrics without a version tag](https://app.datadoghq.com/metric/summary?tags=%21version%3A%2A)  | [logs without a version tag](https://app.datadoghq.com/logs?query=-version%3A%2A%20&agg_m=count&agg_m_source=base&agg_q=source&agg_q_source=base&agg_t=count&cols=host%2Cservice&fromUser=true&messageDisplay=inline&refresh_mode=sliding&storage=hot&stream_sort=desc&top_n=10&top_o=top&viz=timeseries&x_missing=true&live=true) | [spans without a version tag](https://app.datadoghq.com/apm/traces?query=-version%3A%2A%20&agg_m=count&agg_m_source=base&agg_t=count&cols=core_service%2Ccore_resource_name%2Clog_duration%2Clog_http.method%2Clog_http.status_code&fromUser=false&historicalData=false&messageDisplay=inline&query_translation_version=v0&sort=desc&spanType=all&view=spans&paused=false)",
                            "background_color": "white",
                            "font_size": "14",
                            "text_align": "center",
                            "vertical_align": "top",
                            "show_tick": false,
                            "tick_pos": "50%",
                            "tick_edge": "left",
                            "has_padding": true
                        },
                        "layout": {
                            "x": 0,
                            "y": 16,
                            "width": 12,
                            "height": 1
                        }
                    }
                ]
            },
            "layout": {
                "x": 0,
                "y": 36,
                "width": 12,
                "height": 18
            }
        },
        {
            "id": 2053833400833445,
            "definition": {
                "title": "product-line tags",
                "show_title": true,
                "type": "group",
                "layout_type": "ordered",
                "widgets": [
                    {
                        "id": 6090801520538041,
                        "definition": {
                            "title": "Agents with a product-line Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:datadog.agent.running{product-line:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:datadog.agent.running{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 0,
                            "width": 4,
                            "height": 4
                        }
                    },
                    {
                        "id": 2414831081007842,
                        "definition": {
                            "title": "Containers with a product-line Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:container.cpu.system{product-line:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:container.cpu.system{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 0,
                            "width": 4,
                            "height": 4
                        }
                    },
                    {
                        "id": 7180964453049486,
                        "definition": {
                            "title": "Traces with a product-line Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "product-line:* "
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query2",
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 0,
                            "width": 4,
                            "height": 4
                        }
                    },
                    {
                        "id": 165661071177650,
                        "definition": {
                            "title": "Agents Missing product-line Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:datadog.agent.running{!product-line:*} by {host,name,product}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing product-line tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 4,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 777402657609921,
                        "definition": {
                            "title": "Containers Missing product-line Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:container.cpu.system{!product-line:*} by {name,container_name,cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing product-line tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 8,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 3682970985481118,
                        "definition": {
                            "title": "Spans Missing product-line Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "group_by": [
                                                {
                                                    "facet": "env",
                                                    "limit": 10,
                                                    "sort": {
                                                        "aggregation": "count",
                                                        "metric": "count",
                                                        "order": "desc"
                                                    }
                                                },
                                                {
                                                    "facet": "service",
                                                    "limit": 10,
                                                    "sort": {
                                                        "aggregation": "count",
                                                        "metric": "count",
                                                        "order": "desc"
                                                    }
                                                }
                                            ],
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "-product-line:* "
                                            },
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing product-line tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 12,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 4113475434953952,
                        "definition": {
                            "type": "note",
                            "content": "[metrics without a product-line tag](https://app.datadoghq.com/metric/summary?tags=%21product-line%3A%2A)  | [logs without a product-line tag](https://app.datadoghq.com/logs?query=-product-line%3A%2A%20&agg_m=count&agg_m_source=base&agg_q=source&agg_q_source=base&agg_t=count&cols=host%2Cservice&fromUser=true&messageDisplay=inline&refresh_mode=sliding&storage=hot&stream_sort=desc&top_n=10&top_o=top&viz=timeseries&x_missing=true&live=true) | [spans without a product-line tag](https://app.datadoghq.com/apm/traces?query=-product-line%3A%2A%20&agg_m=count&agg_m_source=base&agg_t=count&cols=core_service%2Ccore_resource_name%2Clog_duration%2Clog_http.method%2Clog_http.status_code&fromUser=false&historicalData=false&messageDisplay=inline&query_translation_version=v0&sort=desc&spanType=all&view=spans&paused=false)",
                            "background_color": "white",
                            "font_size": "14",
                            "text_align": "center",
                            "vertical_align": "top",
                            "show_tick": false,
                            "tick_pos": "50%",
                            "tick_edge": "left",
                            "has_padding": true
                        },
                        "layout": {
                            "x": 0,
                            "y": 16,
                            "width": 12,
                            "height": 1
                        }
                    }
                ]
            },
            "layout": {
                "x": 0,
                "y": 54,
                "width": 12,
                "height": 18
            }
        },
        {
            "id": 6560978592485057,
            "definition": {
                "title": "department tags",
                "show_title": true,
                "type": "group",
                "layout_type": "ordered",
                "widgets": [
                    {
                        "id": 8280321346480574,
                        "definition": {
                            "title": "Agents with a department Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:datadog.agent.running{department:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:datadog.agent.running{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 0,
                            "y": 0,
                            "width": 4,
                            "height": 4
                        }
                    },
                    {
                        "id": 14488252268706,
                        "definition": {
                            "title": "Containers with a department Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:container.cpu.system{department:*}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:container.cpu.system{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 4,
                            "y": 0,
                            "width": 4,
                            "height": 4
                        }
                    },
                    {
                        "id": 4748548167262893,
                        "definition": {
                            "title": "Traces with a department Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_value",
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 95
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "100 * query1 / query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "department:* "
                                            },
                                            "storage": "hot"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query2",
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "autoscale": true,
                            "precision": 0,
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            }
                        },
                        "layout": {
                            "x": 8,
                            "y": 0,
                            "width": 4,
                            "height": 4
                        }
                    },
                    {
                        "id": 8657999035010673,
                        "definition": {
                            "title": "Agents Missing department Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:datadog.agent.running{!department:*} by {host,name,team,technical_owner}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing department tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 4,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 1272195229512501,
                        "definition": {
                            "title": "Containers Missing department Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "min:container.cpu.system{!department:*} by {name,container_name,cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing department tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 8,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 7243529056186283,
                        "definition": {
                            "title": "Spans Missing department Tag",
                            "title_size": "16",
                            "title_align": "left",
                            "type": "query_table",
                            "requests": [
                                {
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count",
                                                "metric": "count"
                                            },
                                            "data_source": "spans",
                                            "group_by": [
                                                {
                                                    "facet": "env",
                                                    "limit": 10,
                                                    "sort": {
                                                        "aggregation": "count",
                                                        "metric": "count",
                                                        "order": "desc"
                                                    }
                                                },
                                                {
                                                    "facet": "service",
                                                    "limit": 10,
                                                    "sort": {
                                                        "aggregation": "count",
                                                        "metric": "count",
                                                        "order": "desc"
                                                    }
                                                }
                                            ],
                                            "indexes": [
                                                "*"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "-department:* "
                                            },
                                            "storage": "hot"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "formulas": [
                                        {
                                            "alias": "missing department tag",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ]
                                }
                            ],
                            "has_search_bar": "auto"
                        },
                        "layout": {
                            "x": 0,
                            "y": 12,
                            "width": 12,
                            "height": 4
                        }
                    },
                    {
                        "id": 789491312017344,
                        "definition": {
                            "type": "note",
                            "content": "[metrics without a department tag](https://app.datadoghq.com/metric/summary?tags=%21department%3A%2A)  | [logs without a department tag](https://app.datadoghq.com/logs?query=-department%3A%2A%20&agg_m=count&agg_m_source=base&agg_q=source&agg_q_source=base&agg_t=count&cols=host%2Cservice&fromUser=true&messageDisplay=inline&refresh_mode=sliding&storage=hot&stream_sort=desc&top_n=10&top_o=top&viz=timeseries&x_missing=true&live=true) | [spans without a department tag](https://app.datadoghq.com/apm/traces?query=-department%3A%2A%20&agg_m=count&agg_m_source=base&agg_t=count&cols=core_service%2Ccore_resource_name%2Clog_duration%2Clog_http.method%2Clog_http.status_code&fromUser=false&historicalData=false&messageDisplay=inline&query_translation_version=v0&sort=desc&spanType=all&view=spans&paused=false)",
                            "background_color": "white",
                            "font_size": "14",
                            "text_align": "center",
                            "vertical_align": "top",
                            "show_tick": false,
                            "tick_pos": "50%",
                            "tick_edge": "left",
                            "has_padding": true
                        },
                        "layout": {
                            "x": 0,
                            "y": 16,
                            "width": 12,
                            "height": 1
                        }
                    }
                ]
            },
            "layout": {
                "x": 0,
                "y": 72,
                "width": 12,
                "height": 18
            }
        }
    ],
    "template_variables": [
        {
            "name": "service",
            "prefix": "service",
            "available_values": [],
            "default": "*"
        }
    ],
    "layout_type": "ordered",
    "notify_list": [],
    "reflow_type": "fixed",
    "tags": [
        "team:implementation-services",
        "team:is"
    ]
}